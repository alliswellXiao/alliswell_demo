---
layout: default
title: rpc和http区别
---

<h2>{{ page.title }}</h2>
<p>
Rpc是基于TCP/IP协议的，http是基于HTTP协议的，HTTP协议是在传输层协议TCP之上，所以RPC效率更高。
</p>

<p>在说RPC和HTTP的区别之前，我觉的有必要了解一下OSI的七层网络结构模型（虽然实际应用中基本上都是五层），它可以分为以下几层： （从上到下）</p>
<p>第一层：应用层。定义了用于在网络中进行通信和传输数据的接口；</p>
<p>第二层：表示层。定义不同的系统中数据的传输格式，编码和解码规范等；</p>
<p>第三层：会话层。管理用户的会话，控制用户间逻辑连接的建立和中断；</p>
<p>第四层：传输层。管理着网络中的端到端的数据传输；</p>
<p>第五层：网络层。定义网络设备间如何传输数据；</p>
<p>第六层：链路层。将上面的网络层的数据包封装成数据帧，便于物理层传输；</p>
<p>第七层：物理层。这一层主要就是传输这些二进制数据。</p>

<p>RPC框架</p>
<p>1.client 客户端</p>
<p>2.clinet stub,客户端存根：存放服务端的地址消息，再将客户端的请求参数打包成网络消息，然后通过网络远程发送给服务方</p>
<p>3.server</p>
<p>4.server stub,服务端存根：接收客户端发送过来的消息，将消息解包，并调用本地的方法</p>

<p></p>
<p>RPC主要是用在大型企业里面，因为大型企业里面系统繁多，业务线复杂，而且效率优势非常重要的一块，这个时候RPC的优势就比较明显了。实际的开发当中是这么做的，项目一般使用maven来管理。比如我们有一个处理订单的系统服务，先声明它的所有的接口（这里就是具体指Java中的interface），然后将整个项目打包为一个jar包，服务端这边引入这个二方库，然后实现相应的功能，客户端这边也只需要引入这个二方库即可调用了。为什么这么做？主要是为了减少客户端这边的jar包大小，因为每一次打包发布的时候，jar包太多总是会影响效率。另外也是将客户端和服务端解耦，提高代码的可移植性。</p>
<p>流行的rpc框架：gRPC（google）、thrift（facebook）、Dubbo（阿里,HSF）</p>
<p></p>
<p></p>
<p>HTTP服务</p>
<p>常见的restful接口。优点就是简单、直接、开发方便。利用现成的http协议进行传输。接口可能返回一个JSON字符串或者是XML文档。然后客户端再去处理这个返回的信息，从而可以比较快速地进行开发。但是对于大型企业来说，内部子系统较多、接口非常多的情况下，RPC框架的好处就显示出来了，首先就是长链接，不必每次通信都要像http一样去3次握手什么的，减少了网络开销；其次就是RPC框架一般都有注册中心，有丰富的监控管理；发布、下线接口、动态扩展等，对调用方来说是无感知、统一化的操作。</p>


<p></p>

<p></p>

<p>总结：RPC服务和HTTP服务还是存在很多的不同点的，一般来说，RPC服务主要是针对大型企业的，而HTTP服务主要是针对小企业的，因为RPC效率更高，而HTTP服务开发迭代会更快。总之，选用什么样的框架不是按照市场上流行什么而决定的，而是要对整个项目进行完整地评估，从而在仔细比较两种开发框架对于整个项目的影响，最后再决定什么才是最适合这个项目的。</p>


<p>{{ page.date | date_to_string }}</p>
